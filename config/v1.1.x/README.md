# Hyperledger Fabric v1.1.x sample configurations

This folder holds a set of sample configurations for Hyperledger Fabric v1.1.
The Fabric is set up as follows: 
 - 1 organization for orderers, called OrdererOrg, which admin is
 adminordererorg. A total of 4 orderers can be started, from orderer0 to
 orderer3.
 - 2 organizations for peers, respectively called Org1 and Org2, which admins
 are, respectively, adminorg1 and adminorg2. Up to 2 peers per organization can
 be started. They are named peer1.1 and peer1.2 for organization 1, peer2.1 and
 peer2.2 for organization 2.

The \*.yml files are to use with docker-compose to start a Hyperledger Fabric
1.1.0 (at the time of writing) in various configurations:
 - using solo consensus (docker-compose-solo.yml). Uses one orderer, and one
   peer per organization.
 - using solo consensus and CouchDB as world state (docker-compose-solo-couch.yml).
   Uses one orderer and one peer pe organization.
 - using kafka consensus (docker-compose-kafka.yml). Uses 4 orderers, and 2
   peers per organization.
 - using kafka consensus with CouchDB as world state
   (docker-compose-kafka-couch.yml). Uses 4 orderers, and 2 peers per
   organization.

The ca.yml file was used to start the different CAs. Its content has been moved
to the the other docker-compose files.

The channel-artifacts folder contains the different configuration files of the
Fabric, which are specific to the consensus mechanism used. It includes:
 - configtx.yaml: used to generate the genesis block and the channel
   configuration transaction.
 - orderer.genesis.block: blockchain's genesis block
 - mpl.tx: channel configuration transaction. Expected channel name is *mpl*
 - anchorOrg1.tx: Org1 anchor peer configuration transaction 
 - anchorOrg2.tx: Org2 anchor peer configuration transaction 

The *cas* folder holds the required cryptographic material generated by using
the different CAs.
Each \*Org folder holds the configuration files, and certificates and keys as
generated by the different CAs. 
They look like this: 

```bash
[guigui@t460 cas (master %=)]$ tree OrdererOrg/
OrdererOrg/
├── ca-cert.pem
├── certs
│   ├── admins
│   │   ├── fabric-ca-client-config.yaml
│   │   └── msp
│   │       ├── admincerts
│   │       │   └── cert.pem
│   │       ├── cacerts
│   │       │   └── OrdererOrgCA-7054-OrdererOrgCA.pem
│   │       ├── intermediatecerts
│   │       │   └── OrdererOrgCA-7054-OrdererOrgCA.pem
│   │       ├── keystore
│   │       │   └── 2f29a385f473f7b549c8721fae17908d49214f4878e31faa7918dbb92a691133_sk
│   │       └── signcerts
│   │           └── cert.pem
│   ├── orderer0
│   │   ├── fabric-ca-client-config.yaml
│   │   └── msp
│   │       ├── admincerts
│   │       │   └── cert.pem
│   │       ├── cacerts
│   │       │   └── OrdererOrgCA-7054-OrdererOrgCA.pem
│   │       ├── intermediatecerts
│   │       │   └── OrdererOrgCA-7054-OrdererOrgCA.pem
│   │       ├── keystore
│   │       │   └── 78c6a23fc0f06892c3b664361f6de1771252ea7dbfc868546fdc55ae6a629730_sk
│   │       └── signcerts
│   │           └── cert.pem
│   ├── orderer1
│   │   ├── fabric-ca-client-config.yaml
│   │   └── msp
│   │       ├── admincerts
│   │       │   └── cert.pem
│   │       ├── cacerts
│   │       │   └── OrdererOrgCA-7054-OrdererOrgCA.pem
│   │       ├── intermediatecerts
│   │       │   └── OrdererOrgCA-7054-OrdererOrgCA.pem
│   │       ├── keystore
│   │       │   └── 28692b4e9a28fb2d04d17ed788724e505dce64c7f87752adffbb71a46ec0a049_sk
│   │       └── signcerts
│   │           └── cert.pem
│   ├── orderer2
│   │   ├── fabric-ca-client-config.yaml
│   │   └── msp
│   │       ├── admincerts
│   │       │   └── cert.pem
│   │       ├── cacerts
│   │       │   └── OrdererOrgCA-7054-OrdererOrgCA.pem
│   │       ├── intermediatecerts
│   │       │   └── OrdererOrgCA-7054-OrdererOrgCA.pem
│   │       ├── keystore
│   │       │   └── a9bdb8e51f59f10bbfa3a5a65e70366c96a33f2c88e72c8b08cec3f53bf43dca_sk
│   │       └── signcerts
│   │           └── cert.pem
│   └── orderer3
│       ├── fabric-ca-client-config.yaml
│       └── msp
│           ├── admincerts
│           │   └── cert.pem
│           ├── cacerts
│           │   └── OrdererOrgCA-7054-OrdererOrgCA.pem
│           ├── intermediatecerts
│           │   └── OrdererOrgCA-7054-OrdererOrgCA.pem
│           ├── keystore
│           │   └── fd58fce39f4ccb051b10ca2c030d74953b6451b929cb943a773c36af4446ab92_sk
│           └── signcerts
│               └── cert.pem
├── fabric-ca-client-config.yaml
├── fabric-ca-server-config.yaml
├── fabric-ca-server.db
└── msp
    └── keystore
        └── c1e83678425ce7544e040812367aa94289daab03494ad3f2e28413a534704289_sk
```

The *mspconfig* folder is the one used in the docker-compose files. It
aggregates all required certificates and keys in a single folder, as shown
below:

```bash
[guigui@t460 cas (master %=)]$ tree mspconfig/
mspconfig/
├── msp
│   └── keystore
├── OrdererOrg
│   └── msp
│       ├── admincerts
│       │   └── cert.pem
│       ├── cacerts
│       │   └── OrdererOrgCA-7054-OrdererOrgCA.pem
│       ├── keystore
│       │   ├── 28692b4e9a28fb2d04d17ed788724e505dce64c7f87752adffbb71a46ec0a049_sk
│       │   ├── 2f29a385f473f7b549c8721fae17908d49214f4878e31faa7918dbb92a691133_sk
│       │   ├── 78c6a23fc0f06892c3b664361f6de1771252ea7dbfc868546fdc55ae6a629730_sk
│       │   ├── a9bdb8e51f59f10bbfa3a5a65e70366c96a33f2c88e72c8b08cec3f53bf43dca_sk
│       │   └── fd58fce39f4ccb051b10ca2c030d74953b6451b929cb943a773c36af4446ab92_sk
│       └── signcerts
│           ├── adminord.pem
│           ├── orderer0.pem
│           ├── orderer1.pem
│           ├── orderer2.pem
│           └── orderer3.pem
├── Org1
│   └── msp
│       ├── admincerts
│       │   └── adminOrg1.pem
│       ├── cacerts
│       │   └── Org1CA-7054-Org1CA.pem
│       ├── keystore
│       │   ├── 0cccfde6a9aa72e450e090f950045f1ae9b0084069befa548bdd3d09d84d9983_sk
│       │   ├── 3e7f4124c293c74f03fcc214249879885e457ec2460ec6d9b6f9f58abfb82492_sk
│       │   ├── 4ebcda687c6ddf84b4a3e9617b93418105fc19fa5655b8df7a923755e170dbc3_sk
│       │   └── f638ea873aa8811fa48bc4232c1d91908417277994ca5c8807fe32ae0a894bf5_sk
│       └── signcerts
│           ├── adminOrg1.pem
│           ├── peer1.1.pem
│           └── peer1.2.pem
└── Org2
    └── msp
        ├── admincerts
        │   └── adminOrg2.pem
        ├── cacerts
        │   └── Org2CA-7054-Org2CA.pem
        ├── keystore
        │   ├── 10e9bc1d16f94105adf1f8c3a7d0c15f7c95c2720ee90a6983505ed7921550d9_sk
        │   ├── a380104e6642b463cd1a9e73d99614d84017b59e03db0658ddb366bf1fa936c1_sk
        │   └── a9a57879d84b0ee8152e69ebb5d4796976c62a572390e6295787789822311ce7_sk
        └── signcerts
            ├── adminOrg2.pem
            ├── peer2.1.pem
            └── peer2.2.pem
```
The docker-compose files point to the msp subfolders, depending on which
organizations they are starting.
